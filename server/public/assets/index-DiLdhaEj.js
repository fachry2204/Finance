import{r as s,a as xt,C as Re,D as Oe,U as xe,L as st,X as ve,b as mt,c as ut,F as me,P as We,d as bt,R as ht,W as at,e as lt,S as pt,T as gt,f as ft,A as oe,g as jt,B as Nt,h as vt,i as kt,Y as yt,j as wt,k as St,l as Et,m as ye,n as Ee,o as rt,p as Fe,q as ue,s as qe,t as we,u as De,E as Ct,v as Ue,w as Ve,x as Ce,y as nt,z as At,G as Pt,H as Tt,I as It,J as ke,K as Dt,M as Qe,N as Rt,O as Me,Q as _e,V as He,Z as Ze,_ as Je,$ as Lt}from"./vendor-CJKPWZvi.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const b of d)if(b.type==="childList")for(const N of b.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&m(N)}).observe(document,{childList:!0,subtree:!0});function n(d){const b={};return d.integrity&&(b.integrity=d.integrity),d.referrerPolicy&&(b.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?b.credentials="include":d.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function m(d){if(d.ep)return;d.ep=!0;const b=n(d);fetch(d.href,b)}})();var it={exports:{}},Ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=s,Ot=Symbol.for("react.element"),Ut=Symbol.for("react.fragment"),Mt=Object.prototype.hasOwnProperty,Bt=zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kt={key:!0,ref:!0,__self:!0,__source:!0};function dt(r,x,n){var m,d={},b=null,N=null;n!==void 0&&(b=""+n),x.key!==void 0&&(b=""+x.key),x.ref!==void 0&&(N=x.ref);for(m in x)Mt.call(x,m)&&!Kt.hasOwnProperty(m)&&(d[m]=x[m]);if(r&&r.defaultProps)for(m in x=r.defaultProps,x)d[m]===void 0&&(d[m]=x[m]);return{$$typeof:Ot,type:r,key:b,ref:N,props:d,_owner:Bt.current}}Ke.Fragment=Ut;Ke.jsx=dt;Ke.jsxs=dt;it.exports=Ke;var e=it.exports,Ye={},et=xt;Ye.createRoot=et.createRoot,Ye.hydrateRoot=et.hydrateRoot;const D=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),Se=r=>{if(!r)return"-";const x=r.split("-");if(x.length===3){const m=x[0],d=parseInt(x[1])-1,b=x[2],N=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];if(N[d])return`${b} ${N[d]} ${m}`}const n={day:"numeric",month:"long",year:"numeric"};return new Date(r).toLocaleDateString("id-ID",n)},ot=()=>{const r={weekday:"long",day:"numeric",month:"long",year:"numeric"};return new Date().toLocaleDateString("id-ID",r)},Be=()=>Math.random().toString(36).substr(2,9),Gt=({user:r,onLogoutClick:x,toggleSidebar:n,connectionStatus:m})=>{const b=(()=>{switch(m){case"CONNECTED":return{text:"DB Online",color:"bg-emerald-50 border-emerald-100 text-emerald-700",dot:"bg-emerald-500 animate-pulse"};case"DB_ERROR":return{text:"DB Error",color:"bg-orange-50 border-orange-100 text-orange-700",dot:"bg-orange-500"};case"SERVER_ERROR":return{text:"Node JS Mati",color:"bg-rose-50 border-rose-100 text-rose-700",dot:"bg-rose-500"};default:return{text:"Unknown",color:"bg-slate-50 border-slate-100 text-slate-500",dot:"bg-slate-400"}}})();return e.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 fixed top-0 left-0 right-0 z-40 px-4 md:px-6 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,className:"md:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("img",{src:"/img/logodmsv.png",alt:"D'MASIV Finance",className:"h-10 w-auto object-contain"}),e.jsx("span",{className:"font-bold text-lg text-slate-800 tracking-tight hidden md:block",children:"FINANCE"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-xs font-medium text-slate-500 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-100",children:[e.jsx(Re,{size:14,className:"text-slate-400"}),ot()]}),e.jsxs("div",{className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg border text-xs font-medium ${b.color}`,title:b.text,children:[e.jsx(Oe,{size:14}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${b.dot}`}),b.text]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-3 py-1.5 rounded-full bg-slate-50 border border-slate-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(xe,{size:16})}),e.jsxs("div",{className:"hidden md:block pr-2",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:(r==null?void 0:r.username)||"Admin"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase leading-none",children:(r==null?void 0:r.role)||"User"})]})]}),e.jsx("button",{onClick:x,className:"p-2 text-slate-500 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Keluar Sistem",children:e.jsx(st,{size:20})})]})]})},$t=()=>e.jsx("footer",{className:"bg-white border-t border-slate-200 py-4 px-6 text-center md:text-left",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center text-sm text-slate-500",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," ",e.jsx("span",{className:"font-semibold text-slate-700",children:"D'MASIV Finance"}),". All rights reserved."]}),e.jsx("p",{className:"mt-1 md:mt-0",children:"Build in Garuda Cyber"})]})}),Ft=({activePage:r,setActivePage:x,isOpen:n,setIsOpen:m})=>{const d=[{title:"Menu Utama",items:[{id:"DASHBOARD",label:"Dashboard",icon:mt},{id:"JOURNAL_LIST",label:"Semua Jurnal",icon:ut},{id:"REPORT",label:"Laporan Umum",icon:me}]},{title:"Pengeluaran",items:[{id:"STAT_EXPENSE",label:"Dashboard Cash Out",icon:We},{id:"ADD_EXPENSE",label:"Tambah Pengeluaran",icon:bt},{id:"REIMBURSE",label:"Tambah Reimburse",icon:ht},{id:"REPORT_EXPENSE",label:"Laporan Pengeluaran",icon:me}]},{title:"Pemasukan",items:[{id:"ADD_INCOME",label:"Tambah Pemasukan",icon:at},{id:"STAT_INCOME",label:"Statistik Pemasukan",icon:We}]},{title:"Lainnya",items:[{id:"EMPLOYEES",label:"User",icon:lt},{id:"SETTINGS",label:"Pengaturan",icon:pt}]}];return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:()=>m(!1)}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-slate-200 text-slate-700 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:inset-0 ${n?"translate-x-0":"-translate-x-full"} flex flex-col pt-0`,children:[e.jsx("div",{className:"flex md:hidden items-center justify-end p-4 border-b border-slate-100",children:e.jsx("button",{onClick:()=>m(!1),className:"text-slate-500 hover:text-slate-800",children:e.jsx(ve,{size:24})})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-6",children:d.map((b,N)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3 px-2",children:b.title}),e.jsx("div",{className:"space-y-1",children:b.items.map(k=>{const C=k.icon,w=r===k.id;return e.jsxs("button",{onClick:()=>{x(k.id),m(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 text-sm ${w?"bg-blue-600 text-white shadow-md shadow-blue-200":"text-slate-600 hover:bg-blue-50 hover:text-blue-600"}`,children:[e.jsx(C,{size:18}),e.jsx("span",{className:"font-medium",children:k.label})]},k.id)})})]},N))}),e.jsx("div",{className:"p-4 text-xs text-center text-slate-400 border-t border-slate-100",children:"v1.0.0 Stable"})]})]})},ze=({transactions:r,reimbursements:x,isDarkMode:n,filterType:m="ALL"})=>{const[d,b]=s.useState(null),[N,k]=s.useState(null),C=s.useMemo(()=>{const i=r.filter(E=>E.type==="PEMASUKAN").reduce((E,A)=>E+A.grandTotal,0),y=r.filter(E=>E.type==="PENGELUARAN").reduce((E,A)=>E+A.grandTotal,0),f=x.filter(E=>E.status==="PENDING").reduce((E,A)=>E+A.grandTotal,0),q=i-y;return{totalIncome:i,totalExpense:y,totalReimbursePending:f,balance:q}},[r,x]),w=s.useMemo(()=>{let i=r;m==="INCOME"?i=r.filter(f=>f.type==="PEMASUKAN"):m==="EXPENSE"&&(i=r.filter(f=>f.type==="PENGELUARAN"));const y={};return i.forEach(f=>{y[f.category]||(y[f.category]=0),y[f.category]+=f.grandTotal}),Object.keys(y).map(f=>({name:f,value:y[f]})).slice(0,5)},[r,m]),g=()=>m==="INCOME"?"Statistik Pemasukan":m==="EXPENSE"?"Statistik Pengeluaran":"Dashboard Ringkasan",L=()=>m==="INCOME"?"Pemasukan per Kategori":m==="EXPENSE"?"Pengeluaran per Kategori":"Transaksi per Kategori";return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:g()}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(m==="ALL"||m==="INCOME")&&e.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 relative overflow-hidden transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Total Pemasukan"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:D(C.totalIncome)})]}),e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400",children:e.jsx(gt,{size:24})})]})}),(m==="ALL"||m==="EXPENSE")&&e.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 relative overflow-hidden transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Total Pengeluaran"}),e.jsx("h3",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400",children:D(C.totalExpense)})]}),e.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 rounded-lg text-rose-600 dark:text-rose-400",children:e.jsx(ft,{size:24})})]})}),(m==="ALL"||m==="EXPENSE")&&e.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 relative overflow-hidden transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Total Reimburse (Pending)"}),e.jsx("h3",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:D(C.totalReimbursePending)})]}),e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg text-amber-600 dark:text-amber-400",children:e.jsx(oe,{size:24})})]})}),m==="ALL"&&e.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 relative overflow-hidden transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Saldo Akhir"}),e.jsx("h3",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:D(C.balance)})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:e.jsx(at,{size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 transition-colors",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Transaksi Terakhir"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:[e.jsx("th",{className:"pb-3 px-3",children:"Tanggal"}),e.jsx("th",{className:"pb-3 px-3",children:"Kategori"}),e.jsx("th",{className:"pb-3 px-3 text-right",children:"Nominal"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[r.filter(i=>m==="ALL"||m==="INCOME"&&i.type==="PEMASUKAN"||m==="EXPENSE"&&i.type==="PENGELUARAN").slice(0,5).map(i=>e.jsxs("tr",{onClick:()=>b(i),className:"text-sm hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors even:bg-slate-50 dark:even:bg-slate-800 cursor-pointer",title:"Klik untuk melihat detail",children:[e.jsx("td",{className:"py-3 px-3 text-slate-600 dark:text-slate-300",children:Se(i.date)}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${i.type==="PEMASUKAN"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300":"bg-rose-100 text-rose-800 dark:bg-rose-900/40 dark:text-rose-300"}`,children:i.category})}),e.jsxs("td",{className:`py-3 px-3 text-right font-medium ${i.type==="PEMASUKAN"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:[i.type==="PEMASUKAN"?"+":"-"," ",D(i.grandTotal)]})]},i.id)),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-4 text-center text-slate-400 dark:text-slate-500",children:"Belum ada data transaksi"})})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 transition-colors",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:L()}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(jt,{width:"100%",height:"100%",children:e.jsxs(Nt,{data:w,children:[e.jsx(vt,{strokeDasharray:"3 3",vertical:!1,stroke:n?"#334155":"#e2e8f0"}),e.jsx(kt,{dataKey:"name",fontSize:12,tickLine:!1,axisLine:!1,tick:{fill:n?"#94a3b8":"#64748b"}}),e.jsx(yt,{fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:i=>`${i/1e3}k`,tick:{fill:n?"#94a3b8":"#64748b"}}),e.jsx(wt,{formatter:i=>D(i),cursor:{fill:n?"#334155":"#f8fafc"},contentStyle:{backgroundColor:n?"#1e293b":"#fff",borderColor:n?"#334155":"#e2e8f0",color:n?"#f1f5f9":"#1e293b"},itemStyle:{color:n?"#e2e8f0":"#1e293b"}}),e.jsx(St,{dataKey:"value",fill:m==="INCOME"?"#10b981":m==="EXPENSE"?"#f43f5e":"#3b82f6",radius:[4,4,0,0],children:w.map((i,y)=>e.jsx(Et,{fill:m==="INCOME"?y%2===0?"#10b981":"#34d399":m==="EXPENSE"?y%2===0?"#f43f5e":"#fb7185":y%2===0?"#3b82f6":"#60a5fa"},`cell-${y}`))})]})})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Detail Transaksi"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["ID: ",d.id]})]}),e.jsx("button",{onClick:i=>{i.stopPropagation(),b(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ve,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 border ${d.type==="PEMASUKAN"?"bg-emerald-50 border-emerald-100 text-emerald-800":"bg-rose-50 border-rose-100 text-rose-800"}`,children:[d.type==="PEMASUKAN"?e.jsx(ye,{size:24}):e.jsx(Ee,{size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Jenis Transaksi"}),e.jsxs("p",{className:"font-bold text-lg",children:[d.type," ",d.expenseType?`(${d.expenseType})`:""]})]}),e.jsxs("div",{className:"ml-auto text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Total Nilai"}),e.jsx("p",{className:"font-bold text-lg",children:D(d.grandTotal)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Re,{size:14})," Tanggal"]}),e.jsx("p",{className:"font-medium text-slate-800",children:Se(d.date)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Ee,{size:14})," Kategori"]}),e.jsx("p",{className:"font-medium text-slate-800",children:d.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Nama Kegiatan"}),e.jsx("p",{className:"font-medium text-slate-800",children:d.activityName})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Keterangan"}),e.jsx("p",{className:"text-slate-800 bg-slate-50 p-3 rounded-lg border border-slate-100",children:d.description||"-"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(me,{size:18})," Detail Item"]}),e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Item"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Harga"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Bukti"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:d.items.map((i,y)=>e.jsxs("tr",{className:"even:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-2",children:i.name}),e.jsx("td",{className:"px-4 py-2 text-center",children:i.qty}),e.jsx("td",{className:"px-4 py-2 text-right",children:D(i.price)}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",children:D(i.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:i.filePreviewUrl?e.jsxs("button",{onClick:()=>k(i.filePreviewUrl||null),className:"text-blue-600 hover:text-blue-800 inline-flex items-center gap-1",children:[e.jsx(rt,{size:14})," Lihat"]}):e.jsx("span",{className:"text-slate-300",children:"-"})})]},y))})]})})]})]})]})}),N&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-90 backdrop-blur-sm animate-fade-in",onClick:()=>k(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:()=>k(null),children:e.jsx(ve,{size:32})}),e.jsxs("div",{className:"relative",onClick:i=>i.stopPropagation(),children:[e.jsx("img",{src:N,alt:"Bukti Transaksi",className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl object-contain bg-white",onError:i=>{var f;const y=i.target;y.onerror=null,y.style.display="none",(f=y.nextElementSibling)==null||f.classList.remove("hidden")}}),e.jsxs("div",{className:"hidden flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow-xl text-slate-500 min-w-[300px] min-h-[200px]",children:[e.jsx(oe,{size:48,className:"text-rose-400 mb-3"}),e.jsx("p",{className:"font-medium text-lg text-slate-700",children:"Gambar Tidak Ditemukan"}),e.jsx("p",{className:"text-sm mt-1",children:"File mungkin telah dihapus atau path salah."})]})]})]})]})},Ne=({isOpen:r,onClose:x,title:n,children:m,maxWidth:d="max-w-lg"})=>{const b=s.useRef(null);return s.useEffect(()=>{const N=k=>{k.key==="Escape"&&x()};return r&&window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[r,x]),s.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{ref:b,className:`bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full ${d} max-h-[90vh] overflow-y-auto flex flex-col`,role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700 shrink-0",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:n}),e.jsx("button",{onClick:x,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Close modal",children:e.jsx(ve,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:m})]})}):null},Ge=({isOpen:r,onClose:x,onConfirm:n,title:m,message:d,confirmText:b="Ya, Lanjutkan",cancelText:N="Batal",isDestructive:k=!1,isLoading:C=!1})=>e.jsx(Ne,{isOpen:r,onClose:x,title:m,maxWidth:"max-w-md",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-full shrink-0 ${k?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(oe,{size:24})}),e.jsx("div",{children:e.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed",children:d})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:x,disabled:C,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors font-medium disabled:opacity-50",children:N}),e.jsxs("button",{onClick:n,disabled:C,className:`px-4 py-2 text-white rounded-lg shadow-sm font-medium transition-colors flex items-center gap-2 ${k?"bg-rose-600 hover:bg-rose-700":"bg-blue-600 hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[C&&e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),b]})]})]})}),$e=({onAddTransaction:r,onUpdateTransaction:x,onDeleteTransaction:n,transactions:m,defaultType:d="PENGELUARAN",filterType:b,initialView:N="LIST",categories:k,companies:C,authToken:w})=>{const[g,L]=s.useState(N),[i,y]=s.useState(!1),[f,q]=s.useState(null),[E,A]=s.useState(null),[V,T]=s.useState(new Date().toISOString().split("T")[0]),[z,te]=s.useState(d),[o,c]=s.useState("NORMAL"),[Y,H]=s.useState(""),[$,B]=s.useState(void 0),[K,X]=s.useState(""),[ne,le]=s.useState(""),[R,Q]=s.useState([]),[Z,se]=s.useState(null),[h,v]=s.useState(null),[S,J]=s.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),[F,I]=s.useState({isOpen:!1,title:"",message:"",type:"error"}),ae=()=>J(a=>({...a,isOpen:!1})),be=()=>I(a=>({...a,isOpen:!1})),G=(a,p="error",t="Informasi")=>{I({isOpen:!0,title:t,message:a,type:p})},ie=(a,p,t="Konfirmasi",l=!1)=>{J({isOpen:!0,title:t,message:a,onConfirm:p,isDestructive:l})};s.useEffect(()=>{L(N),te(d),d==="PENGELUARAN"&&c("NORMAL")},[N,d]);const he=s.useMemo(()=>b?m.filter(a=>a.type===b):m,[m,b]),ee=()=>{const a=Be();Q([...R,{id:a,name:"",qty:1,price:0,total:0}]),se(a)},pe=a=>{Q(R.filter(p=>p.id!==a)),Z===a&&se(null)},ge=a=>{const p=R.find(t=>t.id===a);if(p){if(!p.name.trim()||p.qty<=0){G("Mohon lengkapi nama item dan quantity minimal 1");return}se(null)}},ce=(a,p,t)=>{Q(R.map(l=>{if(l.id===a){const u={...l,[p]:t};return(p==="qty"||p==="price")&&(u.total=Number(u.qty)*Number(u.price)),u}return l}))},de=(a,p)=>{Q(R.map(t=>{if(t.id===a){const l=p?URL.createObjectURL(p):void 0;return{...t,file:p,filePreviewUrl:l}}return t}))},fe=()=>R.reduce((a,p)=>a+p.total,0),j=async(a,p,t)=>{if(!w)return G("Sesi habis. Silakan login ulang."),"";const l=new FormData;l.append("companyName",p),l.append("type",t),l.append("file",a);try{const U=await(await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${w}`},body:l})).json();if(U.status==="success")return U.url;throw new Error(U.message||"Upload gagal")}catch(u){return console.error("Upload Error:",u),""}},P=async a=>{if(a.preventDefault(),Z){const p=R.find(t=>t.id===Z);if(p&&(!p.name.trim()||p.qty<=0)){G("Mohon lengkapi Nama Item dan Qty pada baris yang sedang diedit.");return}}if(!Y||!K||R.length===0){G("Mohon lengkapi data wajib dan minimal 1 item.");return}y(!0);try{const p=C.find(M=>M.id===$),t=p?p.name:"General",l=z.toLowerCase(),u=await Promise.all(R.map(async M=>{let re=M.filePreviewUrl;if(M.file){const Le=await j(M.file,t,l);Le&&(re=Le)}const{file:Pe,...Ie}=M;return{...Ie,filePreviewUrl:re}})),U={id:E||Be(),date:V,type:z,expenseType:z==="PENGELUARAN"?o:void 0,category:Y,companyId:$||void 0,activityName:K,description:ne,items:u,grandTotal:fe(),timestamp:Date.now()};E?(x(U),G("Transaksi berhasil diperbarui","success")):r(U),L("LIST"),O()}catch(p){console.error("Gagal menyimpan transaksi:",p),G("Terjadi kesalahan saat menyimpan transaksi.")}finally{y(!1)}},O=()=>{T(new Date().toISOString().split("T")[0]),H(""),B(void 0),X(""),le(""),Q([]),se(null),A(null)},_=(a,p)=>{a.stopPropagation(),A(p.id),T(p.date),te(p.type),c(p.expenseType||"NORMAL"),H(p.category),B(p.companyId),X(p.activityName),le(p.description),Q(p.items.map(t=>({...t}))),L("FORM")},W=(a,p)=>{a.stopPropagation(),ie("Apakah Anda yakin ingin menghapus transaksi ini? Data yang dihapus tidak dapat dikembalikan.",()=>n(p),"Hapus Transaksi",!0)},Ae=()=>g==="FORM"?E?"Edit Transaksi":z==="PEMASUKAN"?"Tambah Pemasukan":"Tambah Pengeluaran":b==="PENGELUARAN"?"Data Pengeluaran":b==="PEMASUKAN"?"Data Pemasukan":"Daftar Jurnal Transaksi",je=()=>b==="PENGELUARAN"?"+ Tambah Pengeluaran":b==="PEMASUKAN"?"+ Tambah Pemasukan":"+ Tambah Transaksi",Te=!!b;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:Ae()}),g==="LIST"?e.jsx("button",{onClick:()=>{O(),L("FORM")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm font-medium",children:je()}):e.jsx("button",{onClick:()=>{O(),L("LIST")},className:"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 px-4 py-2 rounded-lg transition-colors font-medium",children:"Kembali"})]}),g==="FORM"?e.jsxs("form",{onSubmit:P,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 space-y-6 animate-fade-in transition-colors",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tanggal"}),e.jsx("input",{type:"date",required:!0,value:V,onChange:a=>T(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),(!Te||E)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Jenis Transaksi"}),e.jsxs("select",{value:z,onChange:a=>te(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors",children:[e.jsx("option",{value:"PEMASUKAN",children:"Pemasukan"}),e.jsx("option",{value:"PENGELUARAN",children:"Pengeluaran"})]})]}),z==="PENGELUARAN"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Jenis Pengeluaran"}),e.jsxs("select",{value:o,onChange:a=>c(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors",children:[e.jsx("option",{value:"NORMAL",children:"Normal"}),e.jsx("option",{value:"REIMBURSE",children:"Reimburse"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Perusahaan (PT)"}),e.jsxs("select",{value:$||"",onChange:a=>B(a.target.value?Number(a.target.value):void 0),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors",children:[e.jsx("option",{value:"",children:"Pilih Perusahaan (Opsional)"}),C.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Kategori Kegiatan"}),e.jsxs("select",{required:!0,value:Y,onChange:a=>H(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors",children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Kategori"}),k.map((a,p)=>e.jsx("option",{value:a,children:a},p))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Kegiatan"}),e.jsx("input",{type:"text",required:!0,placeholder:"Contoh: Pembelian ATK Bulanan",value:K,onChange:a=>X(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Keterangan Tambahan"}),e.jsx("textarea",{rows:2,value:ne,onChange:a=>le(a.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none transition-colors"})]})]}),e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Detail Item"}),e.jsx("button",{type:"button",onClick:ee,className:"text-sm bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-3 py-1.5 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50 font-medium transition-colors",children:"+ Tambah Item"})]}),e.jsxs("div",{className:"space-y-4",children:[R.map(a=>{const p=Z===a.id;return e.jsx("div",{className:`p-4 rounded-lg border border-slate-200 dark:border-slate-600 grid grid-cols-1 md:grid-cols-12 gap-4 items-center relative transition-colors ${p?"bg-white dark:bg-slate-700 shadow-md ring-1 ring-blue-500/30":"even:bg-slate-50 dark:even:bg-slate-700/50 bg-white dark:bg-slate-800"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Nama Item"}),e.jsx("input",{type:"text",placeholder:"Nama barang/jasa",value:a.name,onChange:t=>ce(a.id,"name",t.target.value),className:"w-full p-2 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm outline-none focus:border-blue-500 transition-colors",autoFocus:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:a.qty,onChange:t=>ce(a.id,"qty",parseInt(t.target.value)||0),className:"w-full p-2 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm outline-none focus:border-blue-500 transition-colors"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Harga Satuan"}),e.jsx("input",{type:"number",min:"0",value:a.price,onChange:t=>ce(a.id,"price",parseInt(t.target.value)||0),className:"w-full p-2 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm outline-none focus:border-blue-500 transition-colors"})]}),e.jsx("div",{className:"md:col-span-3 flex justify-between items-end",children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Total"}),e.jsx("div",{className:"w-full p-2 bg-slate-100 dark:bg-slate-900/50 rounded border border-slate-200 dark:border-slate-600 text-sm font-medium text-slate-700 dark:text-slate-200",children:D(a.total)})]})}),e.jsxs("div",{className:"md:col-span-12 flex items-center justify-between pt-2 border-t border-slate-100 dark:border-slate-600 border-dashed mt-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-xs font-medium transition-colors shadow-sm",children:[e.jsx(Fe,{size:14}),"Upload Bukti",e.jsx("input",{type:"file",className:"hidden",accept:"image/*,.pdf",onChange:t=>de(a.id,t.target.files?t.target.files[0]:null)})]}),a.file&&e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium truncate max-w-[150px]",children:a.file.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>pe(a.id),className:"p-1.5 text-rose-500 hover:bg-rose-50 rounded",title:"Hapus",children:e.jsx(ue,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ge(a.id),className:"p-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 shadow-sm",title:"Simpan Item",children:e.jsx(qe,{size:16})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Item"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:a.name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Qty"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:a.qty})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Harga"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:D(a.price)})]}),e.jsxs("div",{className:"md:col-span-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Total"}),e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:D(a.total)})]}),e.jsxs("div",{className:"flex gap-2",children:[a.filePreviewUrl&&e.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),v(a.filePreviewUrl||null)},className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",title:"Lihat Bukti",children:e.jsx(me,{size:16})}),e.jsx("button",{type:"button",onClick:()=>se(a.id),className:"p-1.5 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{type:"button",onClick:()=>pe(a.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded",title:"Hapus",children:e.jsx(ue,{size:16})})]})]})]})},a.id)}),R.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-400 dark:text-slate-500 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-lg",children:"Belum ada item ditambahkan"})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Grand Total"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:D(fe())})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsx("button",{type:"button",disabled:i,onClick:()=>{O(),L("LIST")},className:"px-6 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 font-medium transition-colors disabled:opacity-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium shadow-sm shadow-blue-200 dark:shadow-none transition-colors flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:i?"Menyimpan...":e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," ",E?"Update Transaksi":"Simpan Transaksi"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Tanggal"}),!b&&e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Jenis"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Kategori"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Kegiatan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Item"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-right",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:he.length>0?he.sort((a,p)=>p.timestamp-a.timestamp).map(a=>e.jsxs("tr",{onClick:()=>q(a),className:"hover:bg-blue-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer even:bg-slate-50 dark:even:bg-slate-800",title:"Klik untuk melihat detail",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:Se(a.date)}),!b&&e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.type==="PEMASUKAN"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300":"bg-rose-100 text-rose-800 dark:bg-rose-900/40 dark:text-rose-300"}`,children:a.type})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:a.category}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("div",{className:"font-medium",children:a.activityName}),e.jsx("div",{className:"text-xs text-slate-400 truncate max-w-[200px]",children:a.description})]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400",children:[a.items.length," Item"]}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-800 dark:text-slate-200 text-right",children:D(a.grandTotal)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:p=>_(p,a),className:"p-1.5 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded transition-colors",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{onClick:p=>W(p,a.id),className:"p-1.5 text-slate-500 hover:text-rose-600 hover:bg-rose-50 rounded transition-colors",title:"Hapus",children:e.jsx(ue,{size:16})})]})})]},a.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:b?6:7,className:"px-6 py-10 text-center text-slate-400 dark:text-slate-500",children:["Belum ada data ",b?b.toLowerCase():"jurnal"]})})})]})})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Detail Transaksi"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["ID: ",f.id]})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),q(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ve,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 border ${f.type==="PEMASUKAN"?"bg-emerald-50 border-emerald-100 text-emerald-800":"bg-rose-50 border-rose-100 text-rose-800"}`,children:[f.type==="PEMASUKAN"?e.jsx(ye,{size:24}):e.jsx(Ee,{size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Jenis Transaksi"}),e.jsxs("p",{className:"font-bold text-lg",children:[f.type," ",f.expenseType?`(${f.expenseType})`:""]})]}),e.jsxs("div",{className:"ml-auto text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Total Nilai"}),e.jsx("p",{className:"font-bold text-lg",children:D(f.grandTotal)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Re,{size:14})," Tanggal"]}),e.jsx("p",{className:"font-medium text-slate-800",children:Se(f.date)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Ee,{size:14})," Kategori"]}),e.jsx("p",{className:"font-medium text-slate-800",children:f.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Nama Kegiatan"}),e.jsx("p",{className:"font-medium text-slate-800",children:f.activityName})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Keterangan"}),e.jsx("p",{className:"text-slate-800 bg-slate-50 p-3 rounded-lg border border-slate-100",children:f.description||"-"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(me,{size:18})," Detail Item"]}),e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Item"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Harga"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Bukti"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:f.items.map((a,p)=>e.jsxs("tr",{className:"even:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-2",children:a.name}),e.jsx("td",{className:"px-4 py-2 text-center",children:a.qty}),e.jsx("td",{className:"px-4 py-2 text-right",children:D(a.price)}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",children:D(a.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:a.filePreviewUrl?e.jsxs("button",{onClick:()=>v(a.filePreviewUrl||null),className:"text-blue-600 hover:text-blue-800 inline-flex items-center gap-1",children:[e.jsx(rt,{size:14})," Lihat"]}):e.jsx("span",{className:"text-slate-300",children:"-"})})]},p))})]})})]})]})]})})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-90 backdrop-blur-sm animate-fade-in",onClick:()=>v(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:()=>v(null),children:e.jsx(ve,{size:32})}),e.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[e.jsx("img",{src:h,alt:"Bukti Transaksi",className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl object-contain bg-white",onError:a=>{var t;const p=a.target;p.onerror=null,p.style.display="none",(t=p.nextElementSibling)==null||t.classList.remove("hidden")}}),e.jsxs("div",{className:"hidden flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow-xl text-slate-500 min-w-[300px] min-h-[200px]",children:[e.jsx(oe,{size:48,className:"text-rose-400 mb-3"}),e.jsx("p",{className:"font-medium text-lg text-slate-700",children:"Gambar Tidak Ditemukan"}),e.jsx("p",{className:"text-sm mt-1",children:"File mungkin telah dihapus atau path salah."})]})]})]}),e.jsx(Ne,{isOpen:F.isOpen,onClose:be,title:F.title,maxWidth:"max-w-sm",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${F.type==="success"?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"} flex items-start gap-3`,children:[F.type==="success"?e.jsx(qe,{size:24}):e.jsx(oe,{size:24}),e.jsx("p",{className:"font-medium",children:F.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:be,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 px-4 py-2 rounded-lg font-medium transition-colors",children:"Tutup"})})]})}),e.jsx(Ge,{isOpen:S.isOpen,onClose:ae,onConfirm:()=>{S.onConfirm(),ae()},title:S.title,message:S.message,isDestructive:S.isDestructive})]})},qt=({reimbursements:r,onAddReimbursement:x,onUpdateReimbursement:n,onDeleteReimbursement:m,onUpdateReimbursementDetails:d,categories:b,companies:N,authToken:k})=>{const[C,w]=s.useState("LIST"),[g,L]=s.useState(null),[i,y]=s.useState(!1),[f,q]=s.useState(null),[E,A]=s.useState(new Date().toISOString().split("T")[0]),[V,T]=s.useState(""),[z,te]=s.useState(""),[o,c]=s.useState(void 0),[Y,H]=s.useState(""),[$,B]=s.useState(""),[K,X]=s.useState([]),[ne,le]=s.useState(null),[R,Q]=s.useState(null),[Z,se]=s.useState(null),[h,v]=s.useState(""),[S,J]=s.useState(null),[F,I]=s.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),[ae,be]=s.useState({isOpen:!1,title:"",message:"",type:"success"}),G=(t,l="error",u="Informasi")=>{be({isOpen:!0,title:u,message:t,type:l})},ie=()=>{be(t=>({...t,isOpen:!1}))},he=(t,l,u="Konfirmasi",U=!1)=>{I({isOpen:!0,title:u,message:t,onConfirm:l,isDestructive:U})},ee=()=>{I(t=>({...t,isOpen:!1}))},pe=()=>{const t=Be();X([...K,{id:t,name:"",qty:1,price:0,total:0}]),le(t)},ge=t=>{X(K.filter(l=>l.id!==t)),ne===t&&le(null)},ce=t=>{const l=K.find(u=>u.id===t);if(l){if(!l.name.trim()||l.qty<=0){G("Mohon lengkapi nama item dan quantity minimal 1");return}le(null)}},de=(t,l,u)=>{X(K.map(U=>{if(U.id===t){const M={...U,[l]:u};return(l==="qty"||l==="price")&&(M.total=Number(M.qty)*Number(M.price)),M}return U}))},fe=(t,l)=>{X(K.map(u=>u.id===t?{...u,file:l,filePreviewUrl:l?URL.createObjectURL(l):void 0}:u))},j=()=>K.reduce((t,l)=>t+l.total,0),P=async(t,l,u)=>{if(!k)return G("Sesi habis. Silakan login ulang."),"";const U=new FormData;U.append("companyName",l),U.append("type",u),U.append("file",t);try{const re=await(await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${k}`},body:U})).json();if(re.status==="success")return re.url;throw new Error(re.message||"Upload gagal")}catch(M){return console.error("Upload Error:",M),""}},O=async t=>{if(t.preventDefault(),ne){const l=K.find(u=>u.id===ne);if(l&&(!l.name.trim()||l.qty<=0)){G("Mohon lengkapi Nama Item dan Qty pada baris yang sedang diedit.");return}}if(K.length===0)return G("Minimal 1 item reimburse.");if(!z)return G("Silakan pilih kategori.");y(!0);try{const l=N.find(re=>re.id===o),u=l?l.name:"General",U=await Promise.all(K.map(async re=>{let Pe=re.filePreviewUrl;if(re.file){const Xe=await P(re.file,u,"reimburse");Xe&&(Pe=Xe)}const{file:Ie,...Le}=re;return{...Le,filePreviewUrl:Pe}})),M={id:f||Be(),date:E,requestorName:V,category:z,companyId:o||void 0,activityName:Y,description:$,items:U,grandTotal:j(),status:"PENDING",timestamp:Date.now()};f?(d(M),G("Data reimburse berhasil diperbarui","success")):x(M),w("LIST"),_()}catch(l){console.error("Gagal menyimpan reimburse:",l),G("Terjadi kesalahan.")}finally{y(!1)}},_=()=>{q(null),A(new Date().toISOString().split("T")[0]),T(""),te(""),c(void 0),H(""),B(""),X([]),le(null)},W=(t,l)=>{if(t.stopPropagation(),l.status!=="PENDING"){G("Hanya pengajuan berstatus PENDING yang dapat diedit.");return}q(l.id),A(l.date),T(l.requestorName),te(l.category),c(l.companyId),H(l.activityName),B(l.description),X(l.items.map(u=>({...u}))),w("FORM")},Ae=(t,l)=>{if(t.stopPropagation(),l.status!=="PENDING"){G("Hanya pengajuan berstatus PENDING yang dapat dihapus.");return}he("Yakin ingin menghapus pengajuan reimburse ini?",()=>{m(l.id)},"Hapus Reimburse",!0)},je=t=>{switch(t){case"PENDING":return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300";case"PROSES":return"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300";case"BERHASIL":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300";case"DITOLAK":return"bg-rose-100 text-rose-800 dark:bg-rose-900/40 dark:text-rose-300";default:return"bg-slate-100 text-slate-800"}},Te=t=>{switch(t){case"PENDING":return e.jsx(At,{size:14,className:"mr-1"});case"PROSES":return e.jsx(Ve,{size:14,className:"mr-1 animate-spin-slow"});case"BERHASIL":return e.jsx(Ce,{size:14,className:"mr-1"});case"DITOLAK":return e.jsx(nt,{size:14,className:"mr-1"})}},a=t=>{L(t),Q(t.status),se(null),v(t.rejectionReason||"")},p=async()=>{if(!(!g||!R)){if(R==="BERHASIL"&&!Z&&!g.transferProofUrl){G("Wajib upload bukti transfer untuk mengubah status menjadi Berhasil.");return}if(R==="DITOLAK"&&!h.trim()){G("Wajib mengisi alasan penolakan jika status Ditolak.");return}y(!0);try{let t=g.transferProofUrl;const l=N.find(M=>M.id===g.companyId),u=l?l.name:"General";if(Z){const M=await P(Z,u,"reimburse");M&&(t=M)}const U={...g,status:R,transferProofUrl:t,rejectionReason:R==="DITOLAK"?h:void 0};n(U),L(null)}catch{G("Gagal update status")}finally{y(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Tambah Reimburse"}),C==="LIST"?e.jsxs("button",{onClick:()=>{_(),w("FORM")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm font-medium",children:[e.jsx(ye,{size:18})," Ajukan Reimburse"]}):e.jsx("button",{onClick:()=>{_(),w("LIST")},className:"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors font-medium",children:"Kembali"})]}),C==="FORM"?e.jsxs("form",{onSubmit:O,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 space-y-6 animate-fade-in transition-colors",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tanggal Pengajuan"}),e.jsx("input",{type:"date",required:!0,value:E,onChange:t=>A(t.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 focus:ring-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Pengaju"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,placeholder:"Nama Lengkap",value:V,onChange:t=>T(t.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 pl-10 focus:ring-blue-500 outline-none transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Perusahaan (PT)"}),e.jsxs("select",{value:o||"",onChange:t=>c(t.target.value?Number(t.target.value):void 0),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 outline-none transition-colors",children:[e.jsx("option",{value:"",children:"Pilih Perusahaan (Opsional)"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Kategori"}),e.jsxs("select",{required:!0,value:z,onChange:t=>te(t.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 outline-none transition-colors",children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Kategori"}),b.map((t,l)=>e.jsx("option",{value:t,children:t},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Kegiatan"}),e.jsx("input",{type:"text",required:!0,value:Y,onChange:t=>H(t.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 outline-none transition-colors"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Keterangan"}),e.jsx("textarea",{rows:2,value:$,onChange:t=>B(t.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-2.5 outline-none transition-colors"})]})]}),e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Detail Item Reimburse"}),e.jsx("button",{type:"button",onClick:pe,className:"text-sm bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-3 py-1.5 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/50 font-medium transition-colors",children:"+ Tambah Item"})]}),e.jsx("div",{className:"space-y-4",children:K.map(t=>{const l=ne===t.id;return e.jsx("div",{className:`p-4 rounded-lg border border-slate-200 dark:border-slate-600 grid grid-cols-1 md:grid-cols-12 gap-4 items-center transition-colors ${l?"bg-white dark:bg-slate-700 shadow-md ring-1 ring-blue-500/30":"even:bg-slate-50 dark:even:bg-slate-700/50 bg-white dark:bg-slate-800"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Keterangan Barang/Jasa"}),e.jsx("input",{type:"text",required:!0,value:t.name,onChange:u=>de(t.id,"name",u.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white rounded text-sm outline-none focus:border-blue-500",autoFocus:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Qty"}),e.jsx("input",{type:"number",required:!0,min:"1",value:t.qty,onChange:u=>de(t.id,"qty",parseInt(u.target.value)||0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white rounded text-sm outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Harga"}),e.jsx("input",{type:"number",required:!0,min:"0",value:t.price,onChange:u=>de(t.id,"price",parseInt(u.target.value)||0),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white rounded text-sm outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Total"}),e.jsx("div",{className:"w-full p-2 bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-200 rounded text-sm font-medium",children:D(t.total)})]}),e.jsxs("div",{className:"md:col-span-12 flex justify-between pt-2 border-t border-slate-100 dark:border-slate-600 border-dashed mt-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-xs font-medium transition-colors shadow-sm",children:[e.jsx(Fe,{size:14}),"Upload Bukti",e.jsx("input",{type:"file",className:"hidden",accept:"image/*,.pdf",onChange:u=>{var U;return fe(t.id,((U=u.target.files)==null?void 0:U[0])||null)}})]}),t.file&&e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium truncate max-w-[150px]",children:t.file.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>ge(t.id),className:"p-1.5 text-rose-500 hover:bg-rose-50 rounded",title:"Hapus",children:e.jsx(ue,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ce(t.id),className:"p-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 shadow-sm",title:"Simpan Item",children:e.jsx(qe,{size:16})})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Item"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:t.name})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Qty"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:t.qty})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Harga"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:D(t.price)})]}),e.jsxs("div",{className:"md:col-span-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-0.5",children:"Total"}),e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:D(t.total)})]}),e.jsxs("div",{className:"flex gap-2",children:[t.filePreviewUrl&&e.jsx("button",{type:"button",onClick:u=>{u.preventDefault(),u.stopPropagation(),J(t.filePreviewUrl||null)},className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded",title:"Lihat Bukti",children:e.jsx(me,{size:16})}),e.jsx("button",{type:"button",onClick:()=>le(t.id),className:"p-1.5 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ge(t.id),className:"p-1.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded",title:"Hapus",children:e.jsx(ue,{size:16})})]})]})]})},t.id)})}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Grand Total Reimburse"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:D(j())})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",disabled:i,onClick:()=>{_(),w("LIST")},className:"px-6 py-2.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-sm shadow-blue-200 dark:shadow-none transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:i?"Memproses...":e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," ",f?"Update Pengajuan":"Simpan Pengajuan"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Pengaju"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Kegiatan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Items"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-right",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:r.length>0?r.sort((t,l)=>l.timestamp-t.timestamp).map(t=>e.jsxs("tr",{onClick:()=>a(t),className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors even:bg-slate-50 dark:even:bg-slate-800 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:Se(t.date)}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-700 dark:text-slate-300",children:t.requestorName}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:[e.jsx("div",{children:t.activityName}),e.jsx("div",{className:"text-xs text-slate-400",children:t.category})]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400",children:[t.items.length," Item"]}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-slate-800 dark:text-slate-200",children:D(t.grandTotal)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${je(t.status)}`,children:[Te(t.status)," ",t.status]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),a(t)},className:"text-blue-500 hover:text-blue-700 dark:hover:text-blue-400 p-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg transition-colors",title:"Lihat Detail",children:e.jsx(Ct,{size:18})}),t.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l=>W(l,t),className:"text-slate-500 hover:text-blue-600 p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:e.jsx(we,{size:18})}),e.jsx("button",{onClick:l=>Ae(l,t),className:"text-slate-500 hover:text-rose-600 p-1 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",title:"Hapus",children:e.jsx(ue,{size:18})})]})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-400 dark:text-slate-500",children:"Belum ada data reimburse"})})})]})}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:["Detail Reimburse",e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold border ${je(g.status)}`,children:g.status})]}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["ID: ",g.id]})]}),e.jsx("button",{onClick:()=>L(null),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ve,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[g.status==="DITOLAK"&&g.rejectionReason&&e.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 p-4 rounded-lg border border-rose-200 dark:border-rose-800 flex gap-3",children:[e.jsx(oe,{className:"text-rose-600 dark:text-rose-400 shrink-0",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-700 dark:text-rose-300",children:"Pengajuan Ditolak"}),e.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400 mt-1",children:g.rejectionReason})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold",children:"Pengaju"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:g.requestorName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold",children:"Tanggal"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:Se(g.date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold",children:"Kegiatan"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:g.activityName}),e.jsx("p",{className:"text-xs text-slate-500",children:g.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold",children:"Keterangan"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:g.description||"-"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white mb-3",children:"Item Pengajuan"}),e.jsx("div",{className:"border rounded-lg border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Item"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Harga"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Bukti"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:g.items.map((t,l)=>e.jsxs("tr",{className:"even:bg-slate-50 dark:even:bg-slate-700",children:[e.jsx("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300",children:t.name}),e.jsx("td",{className:"px-4 py-2 text-center text-slate-600 dark:text-slate-400",children:t.qty}),e.jsx("td",{className:"px-4 py-2 text-right text-slate-600 dark:text-slate-400",children:D(t.price)}),e.jsx("td",{className:"px-4 py-2 text-right font-medium text-slate-800 dark:text-slate-200",children:D(t.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:t.filePreviewUrl?e.jsx("button",{onClick:()=>J(t.filePreviewUrl||null),className:"text-blue-500 hover:underline flex justify-center",children:e.jsx(me,{size:16})}):"-"})]},l))}),e.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700/50 font-bold text-slate-800 dark:text-white border-t border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-3 text-right",children:"Grand Total"}),e.jsx("td",{className:"px-4 py-3 text-right",children:D(g.grandTotal)}),e.jsx("td",{})]})})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(xe,{size:18})," Aksi Admin"]}),g.status==="BERHASIL"?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 font-medium p-3 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[e.jsx(Ue,{size:18})," Status Final: BERHASIL"]}),e.jsx("p",{className:"text-xs text-slate-500 ml-1",children:"Data yang sudah berhasil tidak dapat diubah kembali."}),g.transferProofUrl&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Bukti Transfer:"}),e.jsxs("button",{onClick:()=>J(g.transferProofUrl||null),className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-blue-600 hover:text-blue-700",children:[e.jsx(me,{size:16})," Lihat Bukti Transfer"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["PENDING","PROSES","BERHASIL","DITOLAK"].map(t=>e.jsx("button",{onClick:()=>Q(t),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-colors ${R===t?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:t},t))}),R==="BERHASIL"&&e.jsxs("div",{className:"animate-fade-in p-4 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Upload Bukti Transfer ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm transition-colors shadow-sm font-medium",children:[e.jsx(Fe,{size:16})," Upload Bukti",e.jsx("input",{type:"file",className:"hidden",accept:"image/*,.pdf",onChange:t=>se(t.target.files?t.target.files[0]:null)})]}),e.jsx("span",{className:"text-sm text-slate-500 truncate max-w-[200px]",children:Z?Z.name:g.transferProofUrl?"File sudah ada (ganti jika perlu)":"Belum ada file dipilih"})]})]}),R==="DITOLAK"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Alasan Penolakan ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("textarea",{value:h,onChange:t=>v(t.target.value),placeholder:"Contoh: Bukti struk kurang jelas / Nominal tidak sesuai.",rows:3,className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white border p-3 focus:ring-2 focus:ring-blue-500 outline-none transition-colors"})]}),e.jsx("div",{className:"pt-2 flex justify-end",children:e.jsxs("button",{onClick:p,disabled:i,className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium shadow-sm transition-colors flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[i?e.jsx(Ve,{size:18,className:"animate-spin"}):e.jsx(De,{size:18})," Simpan Perubahan"]})})]})]})]})]})})]}),S&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-90 backdrop-blur-sm animate-fade-in",onClick:()=>J(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:()=>J(null),children:e.jsx(ve,{size:32})}),e.jsxs("div",{className:"relative",onClick:t=>t.stopPropagation(),children:[e.jsx("img",{src:S,alt:"Bukti Reimburse",className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl object-contain bg-white",onError:t=>{var u;const l=t.target;l.onerror=null,l.style.display="none",(u=l.nextElementSibling)==null||u.classList.remove("hidden")}}),e.jsxs("div",{className:"hidden flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow-xl text-slate-500 min-w-[300px] min-h-[200px]",children:[e.jsx(oe,{size:48,className:"text-rose-400 mb-3"}),e.jsx("p",{className:"font-medium text-lg text-slate-700",children:"Gambar Tidak Ditemukan"}),e.jsx("p",{className:"text-sm mt-1",children:"File mungkin telah dihapus atau path salah."})]})]})]}),e.jsx(Ge,{isOpen:F.isOpen,onClose:ee,onConfirm:()=>{F.onConfirm(),ee()},title:F.title,message:F.message,isDestructive:F.isDestructive}),e.jsx(Ne,{isOpen:ae.isOpen,onClose:ie,title:ae.title,maxWidth:"max-w-sm",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-4",children:[e.jsx("div",{className:`p-3 rounded-full mb-4 ${ae.type==="error"?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600"}`,children:ae.type==="error"?e.jsx(oe,{size:32}):e.jsx(Ce,{size:32})}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-6",children:ae.message}),e.jsx("button",{onClick:ie,className:"bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:"Tutup"})]})})]})},tt=({transactions:r,reimbursements:x,fixedFilterType:n,categories:m})=>{const[d,b]=s.useState("ALL"),[N,k]=s.useState(""),[C,w]=s.useState(""),[g,L]=s.useState(""),[i,y]=s.useState(null),[f,q]=s.useState("ALL");s.useEffect(()=>{b(n||"ALL")},[n]);const E=s.useMemo(()=>{let o=[...r.map(c=>({id:c.id,date:c.date,type:c.type,subType:c.expenseType||"NORMAL",category:c.category,activity:c.activityName,total:c.grandTotal,desc:c.description,timestamp:c.timestamp,source:"JURNAL",raw:c})),...x.filter(c=>c.status==="BERHASIL").map(c=>({id:c.id,date:c.date,type:"PENGELUARAN",subType:"REIMBURSE",category:c.category,activity:c.activityName,total:c.grandTotal,desc:`Reimburse oleh: ${c.requestorName} - ${c.description}`,timestamp:c.timestamp,source:"REIMBURSE_MODULE",raw:c}))];return N&&(o=o.filter(c=>c.date>=N)),C&&(o=o.filter(c=>c.date<=C)),d!=="ALL"&&(o=o.filter(c=>c.type===d||d==="REIMBURSE"&&c.subType==="REIMBURSE")),n==="PENGELUARAN"&&f!=="ALL"&&(o=o.filter(c=>c.subType===f)),g&&(o=o.filter(c=>c.category===g)),o.sort((c,Y)=>Y.timestamp-c.timestamp)},[r,x,N,C,d,g,n,f]),A=s.useMemo(()=>({income:E.filter(o=>o.type==="PEMASUKAN").reduce((o,c)=>o+c.total,0),expense:E.filter(o=>o.type==="PENGELUARAN").reduce((o,c)=>o+c.total,0),reimburse:E.filter(o=>o.subType==="REIMBURSE").reduce((o,c)=>o+c.total,0)}),[E]),V=()=>{window.print()},T=()=>{const o=["Tanggal","Jenis","Sub Jenis","Kategori","Kegiatan","Deskripsi","Total"],c=E.map(B=>[B.date,B.type,B.subType,B.category,B.activity,`"${B.desc}"`,B.total]),Y="data:text/csv;charset=utf-8,"+o.join(",")+`
`+c.map(B=>B.join(",")).join(`
`),H=encodeURI(Y),$=document.createElement("a");$.setAttribute("href",H),$.setAttribute("download",`laporan_keuangan_${new Date().toISOString()}.csv`),document.body.appendChild($),$.click(),document.body.removeChild($)},z=()=>n==="PENGELUARAN"?"Laporan Pengeluaran (Cash Out)":"Laporan Keuangan",te=()=>new Date().toLocaleString("id-ID",{dateStyle:"full",timeStyle:"medium"});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("style",{children:`
        @media print {
          @page { margin: 1.5cm; }
          body { 
            background: white; 
            color: black; 
            font-size: 12px;
          }
          /* Hide non-printable areas */
          .no-print, nav, header, footer, .sidebar, button, input, select, .summary-cards {
            display: none !important;
          }
          /* Show print specific areas */
          .print-header, .print-footer {
            display: block !important;
          }
          /* Ensure table looks good */
          table { width: 100%; border-collapse: collapse; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          thead { background-color: #f0f0f0 !important; -webkit-print-color-adjust: exact; }
          tr.even { background-color: #f9f9f9 !important; -webkit-print-color-adjust: exact; }
          
          /* Main container adjustment */
          .main-content { margin: 0; padding: 0; overflow: visible; }
        }
        /* Default hide print areas */
        .print-header, .print-footer { display: none; }
      `}),e.jsxs("div",{className:"print-header mb-6 text-center border-b-2 border-slate-800 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider text-slate-900",children:"System Informasi Finance"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Ruang Dimensi Records"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 no-print",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:z()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:[e.jsx(Pt,{size:18})," Excel"]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-slate-800 dark:bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-900 dark:hover:bg-slate-600 transition-colors",children:[e.jsx(Tt,{size:18})," Print / PDF"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 grid grid-cols-1 md:grid-cols-4 gap-4 transition-colors no-print",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Dari Tanggal"}),e.jsx("input",{type:"date",value:N,onChange:o=>k(o.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg text-sm outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Sampai Tanggal"}),e.jsx("input",{type:"date",value:C,onChange:o=>w(o.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg text-sm outline-none focus:border-blue-500"})]}),n?n==="PENGELUARAN"?e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Filter Jenis"}),e.jsxs("select",{value:f,onChange:o=>q(o.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg text-sm outline-none focus:border-blue-500",children:[e.jsx("option",{value:"ALL",children:"Semua (Cash & Reimburse)"}),e.jsx("option",{value:"NORMAL",children:"Pengeluaran (Cash/Tunai)"}),e.jsx("option",{value:"REIMBURSE",children:"Reimburse (Ganti Uang)"})]})]}):null:e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Jenis Laporan"}),e.jsxs("select",{value:d,onChange:o=>b(o.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg text-sm outline-none focus:border-blue-500",children:[e.jsx("option",{value:"ALL",children:"Semua Transaksi"}),e.jsx("option",{value:"PEMASUKAN",children:"Pemasukan"}),e.jsx("option",{value:"PENGELUARAN",children:"Pengeluaran"}),e.jsx("option",{value:"REIMBURSE",children:"Khusus Reimburse"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1 block",children:"Filter Kategori"}),e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"absolute left-2.5 top-2.5 text-slate-400",size:14}),e.jsxs("select",{value:g,onChange:o=>L(o.target.value),className:"w-full p-2 pl-8 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg text-sm outline-none focus:border-blue-500 appearance-none",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),m.map((o,c)=>e.jsx("option",{value:o,children:o},c))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 summary-cards no-print",children:[(!n||n==="PEMASUKAN")&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-semibold uppercase",children:"Total Pemasukan"}),e.jsx("p",{className:"text-xl font-bold text-emerald-700 dark:text-emerald-300",children:D(A.income)})]}),(!n||n==="PENGELUARAN")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 p-4 rounded-lg border border-rose-100 dark:border-rose-800",children:[e.jsx("p",{className:"text-xs text-rose-600 dark:text-rose-400 font-semibold uppercase",children:"Total Pengeluaran (Cash)"}),e.jsx("p",{className:"text-xl font-bold text-rose-700 dark:text-rose-300",children:D(A.expense-A.reimburse)})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-100 dark:border-amber-800",children:[e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-semibold uppercase",children:"Total Reimburse (Cair)"}),e.jsx("p",{className:"text-xl font-bold text-amber-700 dark:text-amber-300",children:D(A.reimburse)})]}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:[e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 font-semibold uppercase",children:"Total Cash Out"}),e.jsx("p",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:D(A.expense)})]})]}),!n&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-semibold uppercase",children:"Saldo Periode Ini"}),e.jsx("p",{className:"text-xl font-bold text-blue-700 dark:text-blue-300",children:D(A.income-A.expense)})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 overflow-hidden transition-colors",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Jenis"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Kategori & Kegiatan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Keterangan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase text-right",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:E.length>0?E.map((o,c)=>e.jsxs("tr",{onClick:()=>y(o),className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer ${c%2===0?"even":"odd"}`,children:[e.jsx("td",{className:"px-6 py-3 text-sm text-slate-600 dark:text-slate-300 whitespace-nowrap",children:Se(o.date)}),e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1 items-start",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold uppercase ${o.type==="PEMASUKAN"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300":"bg-rose-100 text-rose-800 dark:bg-rose-900/40 dark:text-rose-300"}`,children:o.type}),o.subType==="REIMBURSE"&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-300 border border-amber-200 dark:border-amber-800",children:"REIMBURSE"}),o.subType==="NORMAL"&&o.type==="PENGELUARAN"&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-600",children:"TUNAI"})]})}),e.jsxs("td",{className:"px-6 py-3 text-sm",children:[e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:o.activity}),e.jsx("div",{className:"text-xs text-slate-400",children:o.category})]}),e.jsx("td",{className:"px-6 py-3 text-sm text-slate-500 dark:text-slate-400 max-w-xs truncate",children:o.desc}),e.jsx("td",{className:`px-6 py-3 text-sm font-bold text-right ${o.type==="PEMASUKAN"?"text-emerald-700 dark:text-emerald-400":"text-rose-700 dark:text-rose-400"}`,children:D(o.total)})]},o.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-slate-400 dark:text-slate-500",children:"Tidak ada data laporan yang sesuai filter"})})})]})})}),i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm animate-fade-in no-print",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Detail Transaksi"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["ID: ",i.id]})]}),e.jsx("button",{onClick:o=>{o.stopPropagation(),y(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(ve,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 border ${i.type==="PEMASUKAN"?"bg-emerald-50 border-emerald-100 text-emerald-800":"bg-rose-50 border-rose-100 text-rose-800"}`,children:[i.type==="PEMASUKAN"?e.jsx(ye,{size:24}):e.jsx(Ee,{size:24}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Jenis Transaksi"}),e.jsxs("p",{className:"font-bold text-lg",children:[i.type,i.subType==="REIMBURSE"?" (REIMBURSE)":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:"Total"}),e.jsx("p",{className:"font-bold text-lg",children:D(i.total)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Re,{size:14})," Tanggal"]}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:Se(i.date)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-slate-500 flex items-center gap-1 mb-1",children:[e.jsx(Ee,{size:14})," Kategori"]}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:i.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Nama Kegiatan"}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:i.activity})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Keterangan"}),e.jsx("p",{className:"text-slate-800 dark:text-white bg-slate-50 dark:bg-slate-700 p-3 rounded-lg border border-slate-100 dark:border-slate-600",children:i.desc||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Sumber Data"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded text-xs font-mono bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:i.source})]})]}),i.raw&&i.raw.items&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx(me,{size:16})," Items"]}),e.jsx("div",{className:"text-sm border rounded overflow-hidden dark:border-slate-600",children:i.raw.items.map((o,c)=>e.jsxs("div",{className:"flex justify-between p-2 border-b last:border-0 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50",children:[e.jsxs("span",{children:[o.name," ",e.jsxs("span",{className:"text-slate-400",children:["x",o.qty]})]}),e.jsx("span",{className:"font-medium",children:D(o.total)})]},c))})]})]})]})}),e.jsx("div",{className:"print-footer mt-10 pt-4 border-t border-slate-400 text-right text-sm text-slate-600",children:e.jsxs("p",{children:["Dicetak / Didownload Tanggal : ",te()]})})]})},_t=({settings:r,onUpdateSettings:x,authToken:n})=>{const[m,d]=s.useState("GENERAL"),[b,N]=s.useState(""),[k,C]=s.useState(""),[w,g]=s.useState(r.database),[L,i]=s.useState(!1),[y,f]=s.useState(!1),[q,E]=s.useState(!1),[A,V]=s.useState(null),[T,z]=s.useState(null),[te,o]=s.useState(!1),[c,Y]=s.useState(null),[H,$]=s.useState(""),[B,K]=s.useState(!1),[X,ne]=s.useState(null),[le,R]=s.useState(""),[Q,Z]=s.useState(!1),[se,h]=s.useState(null),[v,S]=s.useState(null),[J,F]=s.useState(!1),I=(j,P)=>{z({type:j,text:P}),o(!0)},ae=async j=>{j.preventDefault();const P=b.trim();if(!(!P||r.categories.includes(P))){if(n){i(!0);try{const _=await(await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({name:P})})).json();if(!_.success){I("error",_.message||"Gagal menambahkan kategori ke server"),i(!1);return}}catch{I("error","Gagal menghubungi server"),i(!1);return}i(!1)}x({...r,categories:[...r.categories,P]}),N(""),I("success","Kategori berhasil ditambahkan")}},be=j=>{Y(j),$(j),K(!0)},G=async j=>{if(j.preventDefault(),!c||!n)return;const P=H.trim();if(P){i(!0);try{const _=await(await fetch(`/api/categories/${encodeURIComponent(c)}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({newName:P})})).json();_.success?(x({...r,categories:r.categories.map(W=>W===c?P:W)}),K(!1),I("success","Kategori berhasil diperbarui")):I("error",_.message||"Gagal update kategori")}catch(O){I("error","Gagal menghubungi server: "+O.message)}finally{i(!1)}}},ie=j=>{h("CATEGORY"),S(j),F(!0)},he=async()=>{if(!v||!n)return;const j=v;try{if(!(await(await fetch(`/api/categories/${encodeURIComponent(j)}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).json()).success){I("error","Gagal menghapus kategori di server");return}x({...r,categories:r.categories.filter(_=>_!==j)}),I("success","Kategori berhasil dihapus")}catch{I("error","Gagal menghubungi server")}finally{F(!1),S(null)}},ee=async j=>{j.preventDefault();const P=k.trim();if(!(!P||r.companies.some(O=>O.name===P))&&n){f(!0);try{const O=await fetch("/api/companies",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({name:P})}),_=O.headers.get("content-type");if(_&&_.indexOf("application/json")!==-1){const W=await O.json();if(!W.success)throw new Error(W.message||"Gagal menambahkan perusahaan ke server");if(W.company)x({...r,companies:[...r.companies,W.company]});else{const je=await(await fetch("/api/companies",{headers:{Authorization:`Bearer ${n}`}})).json();Array.isArray(je)&&x({...r,companies:je})}I("success","Perusahaan berhasil ditambahkan")}else{const W=await O.text();throw new Error(`Server error (${O.status}): ${W.substring(0,100)}`)}}catch(O){console.error("Add company error:",O),I("error",`Gagal: ${O.message}`)}finally{f(!1),C("")}}},pe=j=>{ne(j),R(j.name),Z(!0)},ge=async j=>{if(j.preventDefault(),!X||!n)return;const P=le.trim();if(P){f(!0);try{const _=await(await fetch(`/api/companies/${X.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({name:P})})).json();_.success?(x({...r,companies:r.companies.map(W=>W.id===X.id?{...W,name:P}:W)}),Z(!1),I("success","Perusahaan berhasil diperbarui")):I("error",_.message||"Gagal update perusahaan")}catch(O){I("error","Gagal menghubungi server: "+O.message)}finally{f(!1)}}},ce=j=>{h("COMPANY"),S(j),F(!0)},de=async()=>{if(!v||!n)return;const j=v;try{if(!(await(await fetch(`/api/companies/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).json()).success){I("error","Gagal menghapus perusahaan di server");return}x({...r,companies:r.companies.filter(_=>_.id!==j)}),I("success","Perusahaan berhasil dihapus")}catch{I("error","Gagal menghubungi server")}finally{F(!1),S(null)}},fe=async()=>{E(!0),V(null);try{const P=await(await fetch("/api/test-db")).json();if(P.status==="success")g(O=>({...O,isConnected:!0})),V({type:"success",text:P.message}),x({...r,database:{...w,isConnected:!0}});else throw new Error(P.message)}catch(j){V({type:"error",text:j.message||"Gagal terkoneksi ke server."})}finally{E(!1)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Pengaturan Aplikasi"}),e.jsxs("div",{className:"flex space-x-1 bg-slate-100 p-1 rounded-xl w-fit overflow-x-auto",children:[e.jsx("button",{onClick:()=>d("GENERAL"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m==="GENERAL"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Kategori"}),e.jsx("button",{onClick:()=>d("COMPANIES"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m==="COMPANIES"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Perusahaan"}),e.jsx("button",{onClick:()=>d("DATABASE"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m==="DATABASE"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Database"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[m==="GENERAL"&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(Ee,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Kategori Kegiatan"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Kelola kategori untuk dropdown input."})]})]}),e.jsxs("form",{onSubmit:ae,className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Nama Kategori Baru...",value:b,onChange:j=>N(j.target.value),className:"flex-1 rounded-lg border-slate-300 bg-slate-50 text-slate-900 border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none",disabled:L}),e.jsxs("button",{type:"submit",disabled:!b.trim()||L,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors font-medium",children:[L?e.jsx(ke,{size:18,className:"animate-spin"}):e.jsx(ye,{size:18})," Tambah"]})]}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:r.categories.map((j,P)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100 group hover:border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-slate-700 font-medium",children:j}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>be(j),className:"text-slate-400 hover:text-blue-600 p-1 hover:bg-slate-100 rounded transition-colors",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{onClick:()=>ie(j),className:"text-slate-400 hover:text-rose-500 p-1 hover:bg-rose-50 rounded transition-colors",title:"Hapus",children:e.jsx(ue,{size:16})})]})]},P))})]}),m==="COMPANIES"&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(Dt,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Manajemen Perusahaan"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Kelola daftar perusahaan (PT) untuk transaksi."})]})]}),e.jsxs("form",{onSubmit:ee,className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Nama PT Baru...",value:k,onChange:j=>C(j.target.value),className:"flex-1 rounded-lg border-slate-300 bg-slate-50 text-slate-900 border p-2.5 focus:ring-2 focus:ring-blue-500 outline-none",disabled:y}),e.jsxs("button",{type:"submit",disabled:!k.trim()||y,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors font-medium",children:[y?e.jsx(ke,{size:18,className:"animate-spin"}):e.jsx(ye,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[r.companies&&r.companies.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100 group hover:border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-slate-700 font-medium",children:j.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>pe(j),className:"text-slate-400 hover:text-blue-600 p-1 hover:bg-slate-100 rounded transition-colors",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{onClick:()=>ce(j.id),className:"text-slate-400 hover:text-rose-500 p-1 hover:bg-rose-50 rounded transition-colors",title:"Hapus",children:e.jsx(ue,{size:16})})]})]},j.id)),(!r.companies||r.companies.length===0)&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-sm",children:"Belum ada data perusahaan."})]})]}),m==="DATABASE"&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg text-indigo-600",children:e.jsx(Oe,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Koneksi MySQL"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Konfigurasi database server."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 text-sm",children:[e.jsx("p",{className:"mb-2 font-semibold",children:"Status Koneksi:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${w.isConnected?"bg-emerald-500":"bg-rose-500"}`}),e.jsx("span",{className:"text-slate-700",children:w.isConnected?"Terhubung":"Terputus"})]})]}),A&&e.jsxs("div",{className:`p-3 rounded-lg text-sm flex items-center gap-2 ${A.type==="success"?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:[A.type==="success"?e.jsx(Ce,{size:16}):e.jsx(nt,{size:16}),A.text]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs("button",{onClick:fe,disabled:q,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white px-6 py-2.5 rounded-lg flex items-center gap-2 transition-colors font-medium",children:[q?e.jsx(ke,{size:18,className:"animate-spin"}):e.jsx(Oe,{size:18}),"Test Koneksi"]})})]})]})]})}),e.jsx(Ne,{isOpen:B,onClose:()=>K(!1),title:"Edit Kategori",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nama Kategori"}),e.jsx("input",{type:"text",value:H,onChange:j=>$(j.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>K(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[L&&e.jsx(ke,{size:16,className:"animate-spin"})," Simpan"]})]})]})}),e.jsx(Ne,{isOpen:Q,onClose:()=>Z(!1),title:"Edit Perusahaan",children:e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nama Perusahaan"}),e.jsx("input",{type:"text",value:le,onChange:j=>R(j.target.value),className:"w-full p-2.5 rounded-lg border border-slate-300 outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50",children:[y&&e.jsx(ke,{size:16,className:"animate-spin"})," Simpan"]})]})]})}),e.jsx(Ge,{isOpen:J,onClose:()=>F(!1),onConfirm:se==="CATEGORY"?he:de,title:se==="CATEGORY"?"Hapus Kategori?":"Hapus Perusahaan?",message:se==="CATEGORY"?`Yakin ingin menghapus kategori "${v}"?`:"Yakin ingin menghapus perusahaan ini?",confirmText:"Hapus",isDestructive:!0}),e.jsx(Ne,{isOpen:te,onClose:()=>o(!1),title:(T==null?void 0:T.type)==="success"?"Berhasil":"Informasi",maxWidth:"max-w-sm",children:e.jsxs("div",{className:"flex flex-col items-center text-center p-2",children:[e.jsx("div",{className:`p-3 rounded-full mb-3 ${(T==null?void 0:T.type)==="success"?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:(T==null?void 0:T.type)==="success"?e.jsx(Ce,{size:32}):e.jsx(oe,{size:32})}),e.jsx("p",{className:"text-slate-700 mb-6",children:T==null?void 0:T.text}),e.jsx("button",{onClick:()=>o(!1),className:"w-full py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Tutup"})]})})]})},Ht=({onLogin:r,connectionStatus:x="CHECKING"})=>{const[n,m]=s.useState(""),[d,b]=s.useState(""),[N,k]=s.useState(""),[C,w]=s.useState(!1),g=x==="CONNECTED",i=(()=>{switch(x){case"CONNECTED":return{text:"DB Connected",color:"bg-emerald-50 text-emerald-700 border-emerald-100",dot:"bg-emerald-500 animate-pulse"};case"DB_ERROR":return{text:"Database Tidak Konek Hubungi Admin",color:"bg-orange-50 text-orange-700 border-orange-100",dot:"bg-orange-500"};case"SERVER_ERROR":return{text:"Node JS Mati",color:"bg-rose-50 text-rose-700 border-rose-100",dot:"bg-rose-500"};case"CHECKING":default:return{text:"Checking...",color:"bg-slate-50 text-slate-500 border-slate-100",dot:"bg-slate-400 animate-pulse"}}})(),y=async q=>{if(q.preventDefault(),!!g){w(!0),k("");try{const A=await(await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:d})})).json();A.success&&A.token?r(A.user,A.token):k(A.message||"Login gagal")}catch{k("Gagal menghubungi server")}finally{w(!1)}}},f=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 relative overflow-hidden",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-100 transition-all duration-300 relative",children:[e.jsxs("div",{className:`absolute top-4 right-4 z-10 inline-flex items-center gap-2 px-2 py-1 rounded-full text-[10px] font-medium border shadow-sm transition-all duration-300 ${i.color}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${i.dot}`}),i.text]}),!g&&e.jsxs("button",{onClick:f,className:"absolute top-4 left-4 z-10 inline-flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors",title:"Refresh Page",children:[e.jsx(ke,{size:10})," Refresh"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/img/logodmsv.png",alt:"D'MASIV Logo",className:"h-24 w-auto mx-auto mb-6 object-contain"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Selamat Datang"}),e.jsx("p",{className:"text-slate-500",children:"Sistem Finance D'MASIV"})]}),N&&e.jsxs("div",{className:"mb-4 p-3 bg-rose-50 border border-rose-200 text-rose-600 text-sm rounded-lg text-center font-medium flex items-center justify-center gap-2",children:[e.jsx(oe,{size:16})," ",N]}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-3 text-slate-400",size:20}),e.jsx("input",{type:"text",value:n,onChange:q=>m(q.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"Masukkan username",required:!0,disabled:!g})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-3 text-slate-400",size:20}),e.jsx("input",{type:"password",value:d,onChange:q=>b(q.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"Masukkan password",required:!0,disabled:!g})]})]}),e.jsx("button",{type:"submit",disabled:C||!g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-all shadow-md hover:shadow-lg disabled:opacity-70 disabled:cursor-not-allowed",children:C?"Memproses...":"Masuk Sistem"})]}),e.jsxs("div",{className:"mt-6 text-center text-xs text-slate-400",children:["Â© ",new Date().getFullYear()," D'MASIV Finance System"]})]})})},Jt=({authToken:r})=>{const[x,n]=s.useState("EMPLOYEES"),[m,d]=s.useState([]),[b,N]=s.useState(!1),[k,C]=s.useState(!1),[w,g]=s.useState(!1),[L,i]=s.useState(""),[y,f]=s.useState(null),[q,E]=s.useState(null),[A,V]=s.useState(""),[T,z]=s.useState(""),[te,o]=s.useState(""),[c,Y]=s.useState(""),[H,$]=s.useState(""),[B,K]=s.useState(""),[X,ne]=s.useState([]),[le,R]=s.useState(!1),[Q,Z]=s.useState(!1),[se,h]=s.useState(null),[v,S]=s.useState(""),[J,F]=s.useState(""),[I,ae]=s.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),[be,G]=s.useState(!1),[ie,he]=s.useState({isOpen:!1,title:"",message:"",type:"success"});s.useEffect(()=>{r&&(x==="EMPLOYEES"&&de(),x==="ADMINS"&&W())},[r,x]);const ee=(t,l,u="success")=>{he({isOpen:!0,title:t,message:l,type:u})},pe=()=>{he(t=>({...t,isOpen:!1}))},ge=(t,l,u,U=!1)=>{ae({isOpen:!0,title:t,message:l,onConfirm:u,isDestructive:U})},ce=()=>{ae(t=>({...t,isOpen:!1}))},de=async()=>{f(null);try{const t=await fetch("/api/employees",{headers:{Authorization:`Bearer ${r}`}});if(!t.ok){const u=await t.text();throw new Error(`Server Error (${t.status}): ${u.substring(0,100)}`)}const l=await t.json();Array.isArray(l)?d(l):d([])}catch(t){console.error("Gagal load pegawai",t),f(t.message||"Gagal memuat data pegawai.")}},fe=()=>{V(""),z(""),o(""),Y(""),$(""),K(""),E(null),C(!1)},j=()=>{fe(),N(!0)},P=t=>{V(t.name),z(t.position),o(t.phone),Y(t.email),$(t.username),K(""),E(t.id),C(!0),N(!0)},O=async t=>{if(t.preventDefault(),!r)return;g(!0);const l={name:A,position:T,phone:te,email:c,username:H,password:B};try{let u="/api/employees",U="POST";k&&q&&(u=`/api/employees/${q}`,U="PUT");const M=await fetch(u,{method:U,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(l)});if(!M.ok){const Pe=await M.text();try{const Ie=JSON.parse(Pe);throw new Error(Ie.message||`Gagal menyimpan (${M.status})`)}catch{throw new Error(`Server Error: ${Pe.substring(0,150)}...`)}}const re=await M.json();re.success?(de(),N(!1),fe(),ee("Berhasil",k?"Data berhasil diperbarui":"Pegawai berhasil ditambahkan","success")):ee("Gagal",re.message||"Gagal menyimpan data.","error")}catch(u){console.error("Submit Error:",u),ee("Error",u.message||"Terjadi kesalahan sistem saat menghubungi server.","error")}finally{g(!1)}},_=t=>{ge("Hapus Pegawai","Apakah Anda yakin ingin menghapus data pegawai ini? Tindakan ini tidak dapat dibatalkan.",async()=>{if(r){G(!0);try{const u=await(await fetch(`/api/employees/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).json();u.success?(de(),ce(),ee("Berhasil","Data pegawai berhasil dihapus","success")):ee("Gagal",u.message||"Gagal menghapus","error")}catch{ee("Error","Gagal menghubungi server untuk menghapus.","error")}finally{G(!1)}}},!0)},W=async()=>{try{const t=await fetch("/api/users",{headers:{Authorization:`Bearer ${r}`}});if(t.ok){const l=await t.json();ne(l.filter(u=>u.role==="admin"))}}catch(t){console.error("Failed to fetch admins",t)}},Ae=()=>{S(""),F(""),Z(!1),h(null),R(!0)},je=t=>{S(t.username),F(""),Z(!0),h(t.id),R(!0)},Te=async t=>{if(t.preventDefault(),!!r){g(!0);try{let l="/api/users",u="POST";Q&&se&&(l=`/api/users/${se}`,u="PUT");const M=await(await fetch(l,{method:u,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({username:v,password:J})})).json();M.success?(W(),R(!1),S(""),F(""),ee("Berhasil",Q?"Admin berhasil diperbarui":"Admin berhasil ditambahkan","success")):ee("Gagal",M.message||"Gagal menyimpan admin","error")}catch{ee("Error","Error connecting to server","error")}finally{g(!1)}}},a=t=>{ge("Hapus Admin","Apakah Anda yakin ingin menghapus administrator ini?",async()=>{if(r){G(!0);try{const u=await(await fetch(`/api/users/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).json();u.success?(W(),ce(),ee("Berhasil","Admin berhasil dihapus","success")):ee("Gagal",u.message||"Gagal menghapus admin","error")}catch{ee("Error","Gagal menghubungi server","error")}finally{G(!1)}}},!0)},p=m.filter(t=>t.name.toLowerCase().includes(L.toLowerCase())||t.position.toLowerCase().includes(L.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Manajemen User"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Kelola data pegawai dan administrator sistem."})]})}),e.jsxs("div",{className:"flex space-x-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>n("EMPLOYEES"),className:`px-4 py-2 font-medium text-sm transition-colors relative ${x==="EMPLOYEES"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{size:16})," Data Pegawai"]})}),e.jsx("button",{onClick:()=>n("ADMINS"),className:`px-4 py-2 font-medium text-sm transition-colors relative ${x==="ADMINS"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{size:16})," Administrator"]})})]}),x==="EMPLOYEES"&&e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Rt,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Cari nama atau jabatan...",value:L,onChange:t=>i(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 outline-none focus:ring-2 focus:ring-blue-100 transition-all"})]}),e.jsxs("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm font-medium transition-colors",children:[e.jsx(ye,{size:18})," Tambah Pegawai"]})]}),y&&e.jsxs("div",{className:"bg-rose-50 border border-rose-200 text-rose-700 p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{size:20}),e.jsxs("span",{children:["Error: ",y]})]}),e.jsxs("button",{onClick:de,className:"text-sm font-bold underline hover:text-rose-900 flex items-center gap-1",children:[e.jsx(ke,{size:14})," Coba Lagi"]})]}),p.length===0&&!y?e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-200",children:[e.jsx(xe,{size:48,className:"mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"Belum ada data pegawai."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md border border-slate-100 dark:border-slate-700 group hover:border-blue-200 dark:hover:border-blue-800 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold text-lg",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>P(t),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-slate-50 rounded",title:"Edit",children:e.jsx(we,{size:16})}),e.jsx("button",{onClick:()=>_(t.id),className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded",title:"Hapus",children:e.jsx(ue,{size:16})})]})]}),e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-1",children:t.name}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-medium text-sm mb-4 flex items-center gap-1",children:[e.jsx(Me,{size:14})," ",t.position]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400 border-t border-slate-100 dark:border-slate-700 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{size:14,className:"text-slate-400"})," ",t.phone]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{size:14,className:"text-slate-400"})," ",t.email]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:14,className:"text-slate-400"})," Login: ",e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-900 px-1 rounded",children:t.username})]})]})]},t.id))})]}),x==="ADMINS"&&e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-slate-500",children:"Daftar akun administrator yang memiliki akses penuh ke sistem."}),e.jsxs("button",{onClick:Ae,className:"bg-slate-800 hover:bg-slate-900 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm font-medium transition-colors",children:[e.jsx(ye,{size:18})," Tambah Admin"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-medium",children:"Username"}),e.jsx("th",{className:"p-4 font-medium",children:"Role"}),e.jsx("th",{className:"p-4 font-medium text-right",children:"Aksi"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[X.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[e.jsxs("td",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:e.jsx(Qe,{size:16})}),e.jsx("span",{className:"font-medium text-slate-800 dark:text-white",children:t.username})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full uppercase font-bold tracking-wide",children:t.role})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>je(t),className:"text-slate-400 hover:text-blue-600 hover:bg-slate-50 p-2 rounded-lg transition-colors",title:"Edit Admin",children:e.jsx(we,{size:18})}),e.jsx("button",{onClick:()=>a(t.id),className:"text-rose-500 hover:text-rose-700 hover:bg-rose-50 p-2 rounded-lg transition-colors",title:"Hapus Admin",children:e.jsx(ue,{size:18})})]})})]},t.id)),X.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:"Tidak ada data admin."})})]})]})})]}),e.jsx(Ne,{isOpen:b,onClose:()=>N(!1),title:k?"Edit Data Pegawai":"Tambah Pegawai Baru",children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nama Lengkap"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,value:A,onChange:t=>V(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Jabatan"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,value:T,onChange:t=>z(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"No. HP / WA"}),e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,value:te,onChange:t=>o(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"email",required:!0,value:c,onChange:t=>Y(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-4 mt-2",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-3",children:"Akses Login"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,value:H,onChange:t=>$(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Password ",k&&"(Opsional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"password",required:!k,value:B,onChange:t=>K(t.target.value),placeholder:k?"Kosongkan jika tetap":"",className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-slate-500 hover:text-slate-700 font-medium",children:"Batal"}),e.jsx("button",{type:"submit",disabled:w,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 shadow-sm disabled:opacity-50",children:w?"Menyimpan...":e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," Simpan"]})})]})]})}),e.jsx(Ne,{isOpen:le,onClose:()=>R(!1),title:Q?"Edit Administrator":"Tambah Administrator",maxWidth:"max-w-md",children:e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",required:!0,value:v,onChange:t=>S(t.target.value),className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Password ",Q&&"(Opsional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"password",required:!Q,value:J,onChange:t=>F(t.target.value),placeholder:Q?"Kosongkan jika tetap":"",className:"w-full pl-10 p-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-slate-500 hover:text-slate-700 font-medium",children:"Batal"}),e.jsx("button",{type:"submit",disabled:w,className:"bg-slate-800 hover:bg-slate-900 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 shadow-sm disabled:opacity-50",children:w?"Menyimpan...":e.jsxs(e.Fragment,{children:[e.jsx(De,{size:18})," Simpan"]})})]})]})}),e.jsx(Ge,{isOpen:I.isOpen,onClose:ce,onConfirm:I.onConfirm,title:I.title,message:I.message,isDestructive:I.isDestructive,isLoading:be}),e.jsx(Ne,{isOpen:ie.isOpen,onClose:pe,title:ie.title,maxWidth:"max-w-sm",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:`p-4 rounded-full ${ie.type==="success"?"bg-green-100 text-green-600":"bg-rose-100 text-rose-600"}`,children:ie.type==="success"?e.jsx(Ce,{size:32}):e.jsx(oe,{size:32})}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:ie.message}),e.jsx("button",{onClick:pe,className:"w-full py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Tutup"})]})})]})},Yt=({user:r,onLogout:x})=>{const n=r.details;return e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans pb-20",children:[e.jsxs("div",{className:"bg-blue-600 text-white p-6 pb-12 rounded-b-[2.5rem] shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(Me,{size:120})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm mb-1",children:ot()}),e.jsxs("h1",{className:"text-2xl font-bold",children:["Halo, ",(n==null?void 0:n.name)||r.username]}),e.jsx("p",{className:"text-blue-100 opacity-90",children:(n==null?void 0:n.position)||"Staff"})]}),e.jsx("button",{onClick:x,className:"bg-white/20 p-2 rounded-full hover:bg-white/30 backdrop-blur-sm transition-colors",children:e.jsx(st,{size:20})})]}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 flex-1",children:[e.jsx("p",{className:"text-xs text-blue-100 mb-1",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-1 font-bold",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"})," Aktif"]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 flex-1",children:[e.jsx("p",{className:"text-xs text-blue-100 mb-1",children:"Notifikasi"}),e.jsxs("div",{className:"flex items-center gap-1 font-bold",children:[e.jsx(Ze,{size:14})," 0 Baru"]})]})]})]}),e.jsxs("div",{className:"px-4 -mt-8 relative z-20 space-y-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-md border border-slate-100",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(xe,{size:18,className:"text-blue-600"})," Data Diri"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(Me,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Jabatan"}),e.jsx("p",{className:"font-medium text-slate-800",children:(n==null?void 0:n.position)||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:e.jsx(_e,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Telepon / WhatsApp"}),e.jsx("p",{className:"font-medium text-slate-800",children:(n==null?void 0:n.phone)||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600",children:e.jsx(He,{size:18})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),e.jsx("p",{className:"font-medium text-slate-800 truncate",children:(n==null?void 0:n.email)||"-"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-md border border-slate-100",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(me,{size:18,className:"text-amber-500"})," Informasi"]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl text-center text-slate-500 text-sm",children:[e.jsx(Re,{size:32,className:"mx-auto mb-2 text-slate-300"}),e.jsx("p",{children:"Belum ada pengumuman atau tugas khusus untuk Anda saat ini."})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-3 flex justify-around text-xs font-medium text-slate-400 z-50",children:[e.jsxs("button",{className:"flex flex-col items-center gap-1 text-blue-600",children:[e.jsx(xe,{size:20}),e.jsx("span",{children:"Profil"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-1 hover:text-slate-600",children:[e.jsx(Ce,{size:20}),e.jsx("span",{children:"Tugas"})]}),e.jsxs("button",{className:"flex flex-col items-center gap-1 hover:text-slate-600",children:[e.jsx(Ze,{size:20}),e.jsx("span",{children:"Info"})]})]})]})},Xt=({onComplete:r})=>{const[x,n]=s.useState("IDLE"),[m,d]=s.useState("Sistem mendeteksi pembaruan database diperlukan."),[b,N]=s.useState([]),k=w=>N(g=>[...g,`> ${w}`]),C=async()=>{n("UPDATING"),k("Memulai pembaruan database...");try{const g=await(await fetch("/api/system/db-migrate",{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(g.success)k("Migrasi berhasil."),k("Update versi sistem selesai."),n("SUCCESS"),setTimeout(()=>{r()},2e3);else throw new Error(g.message||"Gagal update database")}catch(w){console.error("Update Error:",w),k(`ERROR: ${w.message}`),n("ERROR"),d(`Gagal memperbarui database: ${w.message}`)}};return s.useEffect(()=>{const w=setTimeout(()=>{C()},1500);return()=>clearTimeout(w)},[]),e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900 bg-opacity-80 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-blue-600 p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:e.jsx(Oe,{size:40,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Pembaruan Sistem"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Sinkronisasi Database Otomatis"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 text-center",children:[x==="IDLE"&&e.jsx("p",{className:"text-slate-600",children:"Mempersiapkan pembaruan..."}),x==="UPDATING"&&e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(ke,{size:32,className:"text-blue-600 animate-spin"}),e.jsx("p",{className:"text-slate-600 font-medium",children:"Sedang memperbarui struktur database..."})]}),x==="SUCCESS"&&e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Ce,{size:40,className:"text-emerald-500 animate-bounce-short"}),e.jsx("p",{className:"text-emerald-700 font-bold text-lg",children:"Pembaruan Berhasil!"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Mengalihkan ke aplikasi..."})]}),x==="ERROR"&&e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Je,{size:40,className:"text-rose-500"}),e.jsx("p",{className:"text-rose-700 font-bold",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-slate-500 text-sm",children:m}),e.jsx("button",{onClick:C,className:"mt-4 px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors",children:"Coba Lagi"})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 font-mono text-xs text-green-400 h-40 overflow-y-auto custom-scrollbar shadow-inner",children:[b.map((w,g)=>e.jsx("div",{className:"mb-1",children:w},g)),x==="UPDATING"&&e.jsx("div",{className:"animate-pulse",children:"_"})]})]})]})})},Wt=()=>{const[r,x]=s.useState(!1),[n,m]=s.useState(null),[d,b]=s.useState(null),[N,k]=s.useState(!1),[C,w]=s.useState(!1),[g,L]=s.useState("CHECKING"),[i,y]=s.useState("DASHBOARD"),[f,q]=s.useState(!1);s.useEffect(()=>{const h=localStorage.getItem("dmasiv_user"),v=localStorage.getItem("dmasiv_token");h&&v&&(m(JSON.parse(h)),b(v),x(!0))},[]);const E=async()=>{try{const v=await(await fetch("/api/test-db")).json();if(v.status==="schema_missing")return w(!0),L("CONNECTED"),!0;const S=v.status==="success";return S?(L("CONNECTED"),C&&w(!1)):L("DB_ERROR"),S}catch{return L("SERVER_ERROR"),!1}};s.useEffect(()=>{E();const h=setInterval(async()=>{!await E()&&r&&V()},3e4);return()=>clearInterval(h)},[r]);const A=(h,v)=>{m(h),b(v),x(!0),localStorage.setItem("dmasiv_user",JSON.stringify(h)),localStorage.setItem("dmasiv_token",v)},V=()=>{localStorage.removeItem("dmasiv_user"),localStorage.removeItem("dmasiv_token"),x(!1),m(null),b(null),k(!1)},T=async(h,v={})=>{if(!d)return null;const S={...v.headers,Authorization:`Bearer ${d}`};try{const J=await fetch(h,{...v,headers:S});return J.status===401||J.status===403?(V(),null):J}catch(J){return console.error("Fetch Error:",J),null}},[z,te]=s.useState({categories:[],companies:[],database:{host:"",user:"",password:"",name:"",port:"3306",isConnected:!1},drive:{isConnected:!1,selectedFolderId:"",selectedFolderName:"",autoUpload:!1}}),o=h=>te(h),[c,Y]=s.useState([]),[H,$]=s.useState([]),B=async h=>{const v=await T(h);if(!v)return null;const S=await v.text();try{return JSON.parse(S)}catch{return null}};s.useEffect(()=>{r&&g==="CONNECTED"&&d&&(n==null?void 0:n.role)!=="employee"&&(async()=>{const v=await B("/api/transactions");Array.isArray(v)&&Y(v);const S=await B("/api/reimbursements");Array.isArray(S)&&$(S);const J=await B("/api/categories"),F=await B("/api/companies"),I=await B("/api/settings");te(ae=>({...ae,categories:Array.isArray(J)?J:[],companies:Array.isArray(F)?F:[],drive:(I==null?void 0:I.drive)||ae.drive,database:{...ae.database,isConnected:!0}}))})()},[r,g,d,n]);const K=async h=>{Y(v=>[h,...v]),await T("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})},X=async h=>{Y(v=>v.filter(S=>S.id!==h)),await T(`/api/transactions/${h}`,{method:"DELETE"})},ne=async h=>{Y(v=>v.map(S=>S.id===h.id?h:S)),await T(`/api/transactions/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})},le=async h=>{$(v=>[h,...v]),await T("/api/reimbursements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})},R=async h=>{$(v=>v.filter(S=>S.id!==h)),await T(`/api/reimbursements/${h}`,{method:"DELETE"})},Q=async h=>{$(v=>v.map(S=>S.id===h.id?h:S)),await T(`/api/reimbursements/${h.id}/details`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})},Z=async h=>{$(v=>v.map(S=>S.id===h.id?h:S)),await T(`/api/reimbursements/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:h.status,rejectionReason:h.rejectionReason})})},se=()=>{const h={authToken:d};switch(i){case"DASHBOARD":return e.jsx(ze,{transactions:c,reimbursements:H,isDarkMode:!1,filterType:"ALL"});case"STAT_EXPENSE":return e.jsx(ze,{transactions:c,reimbursements:H,isDarkMode:!1,filterType:"EXPENSE"});case"ADD_EXPENSE":return e.jsx($e,{onAddTransaction:K,onDeleteTransaction:X,onUpdateTransaction:ne,transactions:c,defaultType:"PENGELUARAN",filterType:"PENGELUARAN",initialView:"LIST",categories:z.categories,companies:z.companies,...h});case"REIMBURSE":return e.jsx(qt,{reimbursements:H,onAddReimbursement:le,onDeleteReimbursement:R,onUpdateReimbursementDetails:Q,onUpdateReimbursement:Z,categories:z.categories,companies:z.companies,...h});case"REPORT_EXPENSE":return e.jsx(tt,{transactions:c,reimbursements:H,fixedFilterType:"PENGELUARAN",categories:z.categories});case"ADD_INCOME":return e.jsx($e,{onAddTransaction:K,onDeleteTransaction:X,onUpdateTransaction:ne,transactions:c,defaultType:"PEMASUKAN",filterType:"PEMASUKAN",initialView:"LIST",categories:z.categories,companies:z.companies,...h});case"STAT_INCOME":return e.jsx(ze,{transactions:c,reimbursements:H,isDarkMode:!1,filterType:"INCOME"});case"JOURNAL_LIST":return e.jsx($e,{onAddTransaction:K,onDeleteTransaction:X,onUpdateTransaction:ne,transactions:c,defaultType:"PENGELUARAN",initialView:"LIST",categories:z.categories,companies:z.companies,...h});case"REPORT":return e.jsx(tt,{transactions:c,reimbursements:H,categories:z.categories});case"EMPLOYEES":return e.jsx(Jt,{...h});case"SETTINGS":return e.jsx(_t,{settings:z,onUpdateSettings:o,...h});default:return e.jsx(ze,{transactions:c,reimbursements:H,isDarkMode:!1})}};return r?(n==null?void 0:n.role)==="employee"?e.jsxs(e.Fragment,{children:[e.jsx(Yt,{user:n,onLogout:()=>k(!0)}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4 text-rose-600",children:e.jsx(Je,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Konfirmasi Keluar"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Anda yakin ingin keluar?"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{onClick:V,className:"px-5 py-2.5 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 shadow-md shadow-rose-200 transition-colors",children:"Keluar"})]})]})})]}):e.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 text-slate-900 font-sans",children:[e.jsx(Gt,{user:n,onLogoutClick:()=>k(!0),toggleSidebar:()=>q(!f),connectionStatus:g}),e.jsxs("div",{className:"flex flex-1 pt-16 overflow-hidden",children:[e.jsx(Ft,{activePage:i,setActivePage:y,isOpen:f,setIsOpen:q}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 scrollbar-thin",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:se()})}),e.jsx("div",{className:"shrink-0 z-20",children:e.jsx($t,{})})]})]}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4 text-rose-600",children:e.jsx(Je,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Konfirmasi Keluar"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Apakah Anda yakin ingin keluar dari sistem?"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{onClick:V,className:"px-5 py-2.5 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 shadow-md shadow-rose-200 transition-colors",children:"Ya, Keluar"})]})]})}),C&&e.jsx(Xt,{onComplete:()=>{w(!1),E()}})]}):e.jsx(Ht,{onLogin:A,connectionStatus:g})},ct=document.getElementById("root");if(!ct)throw new Error("Could not find root element to mount to");const Vt=Ye.createRoot(ct);Vt.render(e.jsx(Lt.StrictMode,{children:e.jsx(Wt,{})}));
